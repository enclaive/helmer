global:
  security:
    allowInsecureImages: true
  imagePullSecrets:
    - harbor-emcp-pull-secret
production: true
auth:
  adminUser: admin@enclaive.cloud
tls:
  enabled: true
  autoGenerated: true
proxy: edge
ingress:
  enabled: true
  ingressClassName: public
  pathType: Prefix
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt
  hostname: auth.enclaive.cloud
  path: /
  tls: true
image:
  registry: harbor.enclaive.cloud
  repository: emcp/kc-provider
  tag: prod
  pullPolicy: IfNotPresent
extraStartupArgs: "--spi-email-template-provider=custom-freemarker"
postgresql:
  enabled: false
externalDatabase:
  host: keycloak-cnpg-cluster-rw.emcp-prod.svc.cluster.local
  port: 5432
  user: bn_keycloak
  database: bitnami_keycloak
  existingSecret: keycloak-cnpg-user-secret
  existingSecretPasswordKey: password

replicaCount: 2

affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchLabels:
            app.kubernetes.io/instance: emcp-prod-keycloak
            app.kubernetes.io/name: keycloak
        topologyKey: kubernetes.io/hostname

resources:
  requests:
    cpu: 2
    ephemeral-storage:  50Mi
    memory: 2048Mi
  limits:
    cpu: 4
    ephemeral-storage:  2Gi
    memory: 12288Mi

customLivenessProbe:
  tcpSocket:
    port: http
  failureThreshold: 3
  initialDelaySeconds: 300
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 5

customReadinessProbe:
  httpGet:
    path: /realms/master
    port: http
    scheme: HTTP
  failureThreshold: 3
  initialDelaySeconds: 90
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 3