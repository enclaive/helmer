# Default values for mongodb
# This is a YAML-formatted file.

namespace: default
replicaCount: 1

image:
  repository: mongo
  tag: "5.0.2"
  pullPolicy: IfNotPresent

imagePullSecrets:
  - name: aws-ecr-creds

nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  port: 27017
  targetPort: 27017

# MongoDB configuration
mongodb:
  config:
    cacheSizeGB: 0.25
  port: 27017

# MongoDB credentials
auth:
  rootUsername: root
  rootPassword: root
  # For production, use secretRef
  # secretRef:
  #   name: mongodb-credentials
  #   userKey: username
  #   passwordKey: password

# Minimal resources to save costs
resources:
  limits:
    cpu: 300m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

podAnnotations: {}
podSecurityContext: {}
securityContext: {}
nodeSelector: {}
tolerations: []
affinity: {}

persistence:
  enabled: true
  storageClass: "openebs-hostpath"
  size: "1Gi"
  accessMode: "ReadWriteOnce"

# Backup configuration - minimal approach
backup:
  enabled: true
  # Schedule in cron format
  schedule: "0 2 * * 0"  # Once per week on Sunday at 2am
  # Number of days to keep backups
  retentionDays: 7
  # Database to backup
  database: backend_db
  # Cleanup cron schedule
  cleanupSchedule: "0 3 * * 0"  # Every Sunday at 3am

# Health check probes
probes:
  liveness:
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
  readiness:
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3